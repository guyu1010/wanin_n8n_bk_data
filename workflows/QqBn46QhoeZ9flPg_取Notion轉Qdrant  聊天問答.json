{
  "createdAt": "2025-11-06T05:49:20.463Z",
  "updatedAt": "2025-11-06T10:51:45.000Z",
  "id": "QqBn46QhoeZ9flPg",
  "name": "å–Notionè½‰Qdrant + èŠå¤©å•ç­”",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{$json}}",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        240,
        448
      ],
      "id": "ef43f0e7-2375-49e1-a4ca-8eff3bd564ce",
      "name": "Respond to Webhook",
      "disabled": true
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "/chat/completions",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -944,
        400
      ],
      "id": "44576959-fffd-4bc9-9a91-1ee909193d89",
      "name": "Webhook completions",
      "webhookId": "e82fc09d-67b5-4e1e-9c1c-a45c2be310bf",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä»¥ä¸‹æ˜¯ä½¿ç”¨è€…èˆ‡ AI çš„å®Œæ•´å°è©±ï¼Œè«‹åƒè€ƒæ‰€æœ‰ä¸Šä¸‹æ–‡ï¼Œä½†è«‹å„ªå…ˆé‡å°æœ€å¾Œä¸€å€‹ä½¿ç”¨è€…å•é¡Œé€²è¡Œå›è¦†ã€‚\n---\n{{$json[\"dialogue\"] }}\n---\nè«‹æ ¹æ“šæœ€å¾Œä¸€å€‹ä½¿ç”¨è€…å•é¡Œã€Œ{{$json[\"lastUserMessage\"]}}ã€é€²è¡Œæœ€ä½³å›æ‡‰ã€‚\n\nYou must output ONLY the following JSON format, and nothing else.\n{\n  \"found\": boolean,\n  \"answer\": string\n}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„ç³»çµ±è¦å‰‡æŸ¥è©¢åŠ©æ‰‹ï¼Œè² è²¬å¾çŸ¥è­˜åº«ä¸­æŸ¥æ‰¾ä¸¦æ•´åˆæœ€æº–ç¢ºçš„ç­”æ¡ˆï¼š\n- **Qdrant Vector Store**ï¼šæ ¸å¿ƒçŸ¥è­˜åº«\n\n## è¼¸å‡ºæ ¼å¼è¦ç¯„\n**å¿…é ˆä¸”åªèƒ½è¼¸å‡ºä»¥ä¸‹JSONæ ¼å¼ï¼Œä¸å¾—æœ‰ä»»ä½•å…¶ä»–å…§å®¹ï¼š**\n{\n\"found\": boolean,\n\"answer\": string\n}\n\n### æ ¼å¼è¦å‰‡\n- æ‰¾åˆ°ç›¸é—œè¦å‰‡æ™‚ï¼š`found = true`ï¼Œ`answer = è©³ç´°è§£ç­”å…§å®¹`\n- æœªæ‰¾åˆ°ç›¸é—œè¦å‰‡æ™‚ï¼š`found = false`ï¼Œ`answer = \"ç›®å‰æ²’æœ‰ç›¸é—œè¦å‰‡\"`\n- **é‡è¦**ï¼šç•¶ `answer` ç‚º \"ç›®å‰æ²’æœ‰ç›¸é—œè¦å‰‡\" æ™‚ï¼Œ`found` å¿…é ˆç‚º `false`\n- ä¸å¾—è¼¸å‡ºJSONä»¥å¤–çš„ä»»ä½•æ–‡å­—ã€ç¬¦è™Ÿæˆ–ç¨‹å¼ç¢¼å€å¡Š\n- ç›´æ¥è¼¸å‡ºç´”JSONï¼Œç„¡éœ€markdownåŒ…è£\n\n### è¼¸å‡ºç¯„ä¾‹\næˆåŠŸæ‰¾åˆ°ï¼š\n`{\"found\": true, \"answer\": \"æ ¹æ“šèŠå¤©å®¤åŸºæœ¬åŠŸèƒ½è¦å‰‡ï¼Œæ¯ä½å®¢æœæœ€å¤šå¯å‚³é€ 10 å‰‡é›¢ç·šè¨Šæ¯ã€‚æ­¤è¦å‰‡é©ç”¨æ–¼æ‰€æœ‰éŠæˆ²ç‰ˆæœ¬ã€‚ä¾†æºï¼šhttps://www.notion.so/ellyli/1f9a4d5e98df80fa9a47da0707afc6f9\"}`\n\næœªæ‰¾åˆ°ï¼š\n`{\"found\": false, \"answer\": \"ç›®å‰æ²’æœ‰ç›¸é—œè¦å‰‡\"}`\n\n## æŸ¥è©¢æµç¨‹\n\n### 1. é—œéµè©èƒå–\n- å¾ä½¿ç”¨è€…å•é¡Œä¸­æå–æ ¸å¿ƒé—œéµè©ï¼ˆéŠæˆ²åã€åŠŸèƒ½åã€è¦å‰‡é¡å‹ç­‰ï¼‰\n- é¿å…ä½¿ç”¨å®Œæ•´å¥å­æˆ–åŒ…å«æƒ…ç·’æ€§è©å½™çš„æŸ¥è©¢\n- ç¯„ä¾‹ï¼šã€Œç‚ºä»€éº¼ä¸­æ–‡ç‰ˆçš„èŠå¤©å®¤åŠŸèƒ½å£äº†ï¼Ÿã€â†’ èƒå–ã€Œä¸­æ–‡ç‰ˆ èŠå¤©å®¤ã€\n\n### 2. æŸ¥è©¢ç­–ç•¥\n\n#### ç¬¬ä¸€å±¤ï¼šQdrant Vector Storeï¼ˆæœ€å„ªå…ˆã€æœ€ä¸»è¦çš„æŸ¥è©¢å·¥å…·ï¼‰\n- ä½¿ç”¨èƒå–çš„é—œéµè©é€²è¡Œå‘é‡æœå°‹\n- æ³¨æ„å…§å®¹ä»¥ã€Œ---ã€åˆ†éš”ä¸åŒå€å¡Šï¼Œéœ€è­˜åˆ¥ç›¸é—œæ®µè½\n\n## ç‰¹æ®Šæƒ…æ³è™•ç†\n\n### è¦å‰‡è¡çªè™•ç†\nç•¶ç™¼ç¾å¤šæ¢è¦å‰‡å­˜åœ¨è¡çªæ™‚ï¼š\n1. æ˜ç¢ºåˆ—å‡ºæ¯æ¢è¦å‰‡çš„ä¾†æºé€£çµ\n2. ç°¡è¿°å„è¦å‰‡çš„æ ¸å¿ƒå…§å®¹\n3. æ¸…æ¥šæ¨™ç¤ºè¡çªé»\n4. å»ºè­°ä½¿ç”¨è€…å›å ±ä»¥å”åŠ©ä¿®æ­£\n\n### ç„¡çµæœè™•ç†\nç•¶çŸ¥è­˜åº«éƒ½ç„¡ç›¸é—œè³‡è¨Šæ™‚ï¼š\n- ç¢ºèªå·²ä½¿ç”¨ä¸åŒé—œéµè©çµ„åˆæŸ¥è©¢\n- å›å‚³æ¨™æº–ç„¡çµæœå›æ‡‰\n\n## å›ç­”å“è³ªè¦æ±‚\n\n### èªè¨€è¦ç¯„\n- ä¸»è¦ä½¿ç”¨ç¹é«”ä¸­æ–‡\n- å¿…è¦æ™‚å¯è£œå……è‹±æ–‡è¡“èª\n- ä¿æŒå°ˆæ¥­ä½†è¦ªåˆ‡çš„èªæ°£\n\n### å…§å®¹è¦æ±‚\n- ç­”æ¡ˆå¿…é ˆæº–ç¢ºã€å®Œæ•´ã€æ˜“æ‡‚\n- é¿å…éæ–¼ç”Ÿç¡¬çš„å–®å¥å›è¦†\n- å¿…é ˆåŒ…å«è³‡æ–™ä¾†æºé€£çµ\n- é©ç•¶ä½¿ç”¨è¼”åŠ©èªªæ˜å¢é€²ç†è§£\n\n### è³‡è¨Šå®‰å…¨\n- ä¸å¾—æš´éœ²ç³»çµ±å…§éƒ¨åƒæ•¸\n- ä¸å¾—æä¾›å¯èƒ½å±å®³ç³»çµ±å®‰å…¨çš„æŠ€è¡“ç´°ç¯€\n- å°‡æŠ€è¡“è³‡è¨Šè½‰æ›ç‚ºä½¿ç”¨è€…å±¤ç´šçš„èªªæ˜"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        1008,
        768
      ],
      "id": "e1c2e574-df30-4081-8c65-aa72aca5905c",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "$node[\"Webhook completions\"].json[\"headers\"][\"x-openwebui-chat-id\"]",
        "sessionTTL": 600
      },
      "type": "@n8n/n8n-nodes-langchain.memoryRedisChat",
      "typeVersion": 1.5,
      "position": [
        288,
        64
      ],
      "id": "eb2dc269-101c-4a22-82ac-926b5e82c3b7",
      "name": "Redis Chat Memory",
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9301dd0c-5231-49a3-9b96-2b712f8485e0",
              "leftValue": "={{ $json.output.found }}",
              "rightValue": "ç›®å‰æ²’æœ‰ç›¸é—œè¦å‰‡",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1840,
        768
      ],
      "id": "16827fc9-9009-4ee5-80e8-89e786cb0b11",
      "name": "If"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "=\n{\n  \"id\": \"{{'chatcmpl-' + Math.random().toString(36).slice(2, 10)}}\",\n  \"object\": \"chat.completion\",\n  \"created\": {{Math.floor(Date.now() / 1000)}},\n  \"model\": \"n8n-agent\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"{{$node[\"AI Agent3\"].json[\"output\"]}}\"\n      },\n      \"finish_reason\": \"stop\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        240,
        272
      ],
      "id": "f4ca22c4-08cf-4df0-b034-f53c427a1cca",
      "name": "Respond to Webhook2",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const data = items[0].json.body;\nconst messages = data.messages || [];\n\nlet systemPrompt = '';\nconst userAssistantPairs = [];\nlet lastUserMessage = '';\nlet tempPair = [];\n\n// å…ˆæ‰¾ system prompt\nfor (const msg of messages) {\n  if (msg.role === 'system' && !systemPrompt) {\n    systemPrompt = msg.content;\n  }\n}\n\n// æ”¶é›† user/assistant æˆå°çš„å°è©±\nfor (const msg of messages) {\n  if (msg.role === 'user') {\n    // å¦‚æœä¸Šä¸€çµ„åªæœ‰ userï¼Œæ²’æœ‰ assistantï¼Œå…ˆå­˜èµ·ä¾†\n    if (tempPair.length > 0) {\n      userAssistantPairs.push(tempPair);\n    }\n    tempPair = [`ä½¿ç”¨è€…ï¼š${msg.content}`];\n    lastUserMessage = msg.content;\n  } else if (msg.role === 'assistant') {\n    tempPair.push(`AIï¼š${msg.content}`);\n    userAssistantPairs.push(tempPair);\n    tempPair = [];\n  }\n}\n// å¦‚æœæœ€å¾Œä¸€çµ„åªæœ‰ user æ²’æœ‰ assistant\nif (tempPair.length > 0) {\n  userAssistantPairs.push(tempPair);\n}\n\n// åªå–æœ€è¿‘ 5 çµ„\nconst last5Pairs = userAssistantPairs.slice(-5);\nconst dialogue = last5Pairs.flat().join('\\n');\n\n// è§£æè«‹æ±‚ç›®çš„\nlet ReqPurpose = 'query'; // é è¨­ç‚ºä¸€èˆ¬æŸ¥è©¢\n\nif (lastUserMessage.trim().startsWith('###')) {\n  if (lastUserMessage.includes('Generate a concise, 3-5 word title')) {\n    ReqPurpose = 'title';\n  } else if (lastUserMessage.includes('Generate 1-3 broad tags')) {\n    ReqPurpose = 'tags';\n  } else if (\n    lastUserMessage.includes('Suggest 3-5 relevant follow-up questions') ||\n    lastUserMessage.includes('\"follow_ups\"')\n  ) {\n    ReqPurpose = 'follow_ups';\n  }\n}\n\nreturn [\n  {\n    json: {\n      systemPrompt,\n      dialogue,\n      lastUserMessage,\n      allMessages: messages,\n      ReqPurpose // é€™å€‹çµ¦ IF ç¯€é»åˆ¤æ–·\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -720,
        400
      ],
      "id": "6cf4a40d-52ec-42e3-9ec7-9bba95e2f6f6",
      "name": "Code"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"found\": true,\n\t\"answer\": \"å®¢æœå¯ä»¥å¾å¾Œå°é¸æ“‡åœ–ç‰‡å¾Œä¸Šå‚³ï¼Œå–®ä¸€æª”æ¡ˆä¸Šé™5MBï¼Œæª”æ¡ˆæ ¼å¼æ”¯æ´pngã€jpg\"\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        1456,
        960
      ],
      "id": "b3d259fe-47a1-4472-a0f6-03c27d9934f7",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "4abd030f-1cb6-47dc-b90b-098009445209",
                    "leftValue": "={{$json[\"ReqPurpose\"]}}",
                    "rightValue": "title",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "title"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3c9f308d-c90e-46d7-b70c-c704c8977513",
                    "leftValue": "={{$json[\"ReqPurpose\"]}}",
                    "rightValue": "tags",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "tags"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "091d8c6b-7bd1-4ec8-bc4c-2f81eb2afe4a",
                    "leftValue": "={{$json[\"ReqPurpose\"]}}",
                    "rightValue": "follow_ups",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "follow_ups"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{$json[\"ReqPurpose\"]}}",
                    "rightValue": "query",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "d0643ac9-eb57-4454-872b-cc31638645d8"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "query"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -512,
        368
      ],
      "id": "3a57c88a-768b-458c-85ea-71a3f74f67c8",
      "name": "Switch"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={ \"title\": \"ğŸª Perfect Chocolate Chip Recipe\" }",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        -80,
        80
      ],
      "id": "e5d2003d-21e6-41d9-90cc-c7a66df5a54c",
      "name": "Res Title"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={ \"tags\": [\"å®¢æœå·¥å…·\", \"å°å¹«æ‰‹\"] }",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        -80,
        240
      ],
      "id": "bb8e145c-d05d-4716-a49c-d02b9738f305",
      "name": "Res Tags"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={ \"follow_ups\": [\n  \"??\"\n]}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        -80,
        384
      ],
      "id": "a0dde7dc-9cd0-4ae0-8ea9-6f082a7980dc",
      "name": "Res Follow_ups"
    },
    {
      "parameters": {
        "path": "models",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -960,
        80
      ],
      "id": "9a79793e-af3e-47c7-9426-1e6f236147a7",
      "name": "Webhook model",
      "webhookId": "0c7f0fd5-e081-4978-b85c-893d7f8bb99c",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const models = {\n  object: \"list\",\n  data: [\n    {\n      id: \"çŸ¥è­˜æ©Ÿå™¨äºº\",\n      object: \"model\",\n      created: 1686935000,\n      owned_by: \"jun\"\n    }\n  ]\n};\n\nreturn [\n  {\n    json: models\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -752,
        80
      ],
      "id": "3669f4cf-e5fe-474c-99a9-de3bbf7965fa",
      "name": "create data"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{$json}}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.2,
      "position": [
        -560,
        80
      ],
      "id": "1412ae32-2a63-4004-86e7-a8b41055a7d0",
      "name": "Response Webhook model"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1104,
        1488
      ],
      "id": "306866ad-4d65-4058-93b2-18034ed635f5",
      "name": "Loop Over Items"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "name": "Replace Me",
      "typeVersion": 1,
      "position": [
        2640,
        1504
      ],
      "id": "bcd79b46-f1e6-4e52-b7ba-6c3fdddf565a"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "1f5a4d5e-98df-80a6-b88e-f501c36b069b",
          "mode": "list",
          "cachedResultName": "è¦å‰‡è¡¨",
          "cachedResultUrl": "https://www.notion.so/1f5a4d5e98df80a6b88ef501c36b069b"
        },
        "returnAll": true,
        "simple": false,
        "filterType": "manual",
        "matchType": "allFilters",
        "filters": {
          "conditions": [
            {
              "key": "ä¸Šæ¬¡ç·¨è¼¯æ™‚é–“|last_edited_time",
              "condition": "after",
              "lastEditedTime": "={{ \n  new Date(\n    new Date().getTime() + 8*60*60*1000 - 14*24*60*60*1000\n  ).toISOString() \n}}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        480,
        1488
      ],
      "id": "d9cc2fd9-21c3-4d5b-91ef-40d0506a8a3b",
      "name": "Notion DB"
    },
    {
      "parameters": {
        "resource": "block",
        "operation": "getAll",
        "blockId": {
          "__rl": true,
          "value": "={{ $json.url }}",
          "mode": "url"
        },
        "returnAll": true,
        "fetchNestedBlocks": true,
        "simplifyOutput": false
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        1392,
        1504
      ],
      "id": "e34642e2-8943-46a6-94a3-04ded9d5e908",
      "name": "Notion Page",
      "credentials": {
        "notionApi": {
          "id": "U9GrNl7JAdc8rbKC",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "é€™æ˜¯ä¸€å€‹å‘é‡çŸ¥è­˜æŸ¥è©¢å·¥å…·ï¼Œå¯ä»¥ç”¨ä¾†æŸ¥è©¢è¦å‰‡æˆ–çŸ¥è­˜ã€‚",
        "qdrantCollection": {
          "__rl": true,
          "value": "resume",
          "mode": "list",
          "cachedResultName": "resume"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        1168,
        960
      ],
      "id": "5d43c6d3-3482-42fa-8772-3006a070d22c",
      "name": "Qdrant Vector Store",
      "credentials": {
        "qdrantApi": {
          "id": "bBM1xZbp8MLVQ5BC",
          "name": "QdrantApi account"
        }
      }
    },
    {
      "parameters": {
        "description": "æŸ¥è©¢äººå·¥è£œå……çš„å®¢æœQAè³‡æ–™åº«ï¼Œæ­¤å·¥å…·å¯ä½œç‚ºå‘é‡è³‡æ–™åº«çš„è£œå……è³‡æ–™ã€‚",
        "workflowId": {
          "__rl": true,
          "value": "xVswRFarAXhgsxJa",
          "mode": "list",
          "cachedResultUrl": "/workflow/xVswRFarAXhgsxJa",
          "cachedResultName": "Get Notion Tool"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}"
          },
          "matchingColumns": [
            "query"
          ],
          "schema": [
            {
              "id": "query",
              "displayName": "query",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        992,
        960
      ],
      "id": "c596f8cf-e3ce-4e57-b5af-fc0cb7f1bf47",
      "name": "SearchQADatabase",
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-embedding-001"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        1168,
        1104
      ],
      "id": "0d8ff7a3-a208-43dd-99f9-504c8637dc11",
      "name": "Embeddings Google Gemini1",
      "credentials": {
        "googlePalmApi": {
          "id": "TcbdbxzebK9gSKPI",
          "name": "Google Gemini(PaLM) Api account 6"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// è¤‡é›œ Notion é é¢å…§å®¹æ•´ç†\nlet content = '';\nlet pageTitle = $('Loop Over Items').first()?.json?.title ?? \"\";\nlet keywords = $('Loop Over Items').first()?.json?.Keywords ?? [];\nif (!Array.isArray(keywords)) {\n  keywords = [];\n}\nlet gameServer = $('Loop Over Items').first()?.json?.GameServer ?? [];\nif (!Array.isArray(gameServer)) {\n  gameServer = [];\n}\nlet system = $('Loop Over Items').first()?.json?.system ?? [];\nif (!Array.isArray(system)) {\n  system = [];\n}\n\nlet sections = [];\nlet currentSection = '';\n\n// è™•ç†æ¯å€‹ block\nfor (const block of items) {\n  const type = block.json.type;\n  const data = block.json[type];\n  \n  // 1. æ¨™é¡Œå‹å€å¡Šï¼ˆé‡åˆ°æ¨™é¡Œå°±é–‹å§‹æ–°å€å¡Šï¼‰\n  const textArr = data?.text || data?.rich_text || [];\n  if (['heading_1', 'heading_2', 'heading_3'].includes(type)) {\n    // å…ˆæŠŠç¾æœ‰å…§å®¹æ”¶é€² sections\n    if (currentSection.trim()) {\n      sections.push(currentSection.trim());\n      currentSection = '';\n    }\n    const text = textArr.map(rt => rt.plain_text).join('').trim();\n    if (text) {\n      currentSection += `ã€${text}ã€‘\\n`;\n    }\n    continue;\n  }\n\n  // 2. ä¸€èˆ¬æ®µè½ã€æ¢åˆ—ã€ä»»å‹™æ¸…å–®ã€å¼•ç”¨\n  if (\n    [\n      'paragraph', 'bulleted_list_item', 'numbered_list_item', 'to_do', 'quote'\n    ].includes(type)\n  ) {\n    const text = textArr.map(rt => rt.plain_text).join('').trim();\n    if (text) {\n      if (type.endsWith('list_item')) {\n        currentSection += `ãƒ»${text}\\n`;\n      } else {\n        currentSection += text + '\\n';\n      }\n    }\n    continue;\n  }\n\n  // 3. code å€å¡Š\n  if (type === 'code') {\n    const codeText = textArr.map(rt => rt.plain_text).join('').trim();\n    if (codeText) {\n      currentSection += `\\`\\`\\`\\n${codeText}\\n\\`\\`\\`\\n`;\n    }\n    continue;\n  }\n\n  // 4. table row\n  if (type === 'table_row') {\n    const rowCells = data.cells || [];\n    const rowText = rowCells.map(\n      cell => cell.map(rt => rt.plain_text).join('')\n    ).join(' | ').trim();\n    if (rowText) {\n      currentSection += rowText + '\\n';\n    }\n    continue;\n  }\n\n  // 5. image å€å¡Š\n  if (type === 'image') {\n    const caption = (data.caption || []).map(rt => rt.plain_text).join('').trim();\n    if (caption) {\n      currentSection += `[åœ–ç‰‡èªªæ˜ï¼š${caption}]\\n`;\n    } else {\n      currentSection += `[åœ–ç‰‡]\\n`;\n    }\n    continue;\n  }\n\n  // 6. link_preview å€å¡Š\n  if (type === 'link_preview') {\n    const url = data.url || '';\n    if (url) {\n      currentSection += `é€£çµï¼š${url}\\n`;\n    }\n    continue;\n  }\n}\n\n// æ”¶å°¾ï¼Œæœ€å¾Œä¸€å€ä¹Ÿè¦åŠ é€² sections\nif (currentSection.trim()) {\n  sections.push(currentSection.trim());\n}\n\n// ç”¨ --- åˆ†å€\ncontent = sections.join('\\n---\\n');\n\n// æº–å‚™ keywords å’Œ tags çš„æ–‡å­—è¡¨ç¤ºï¼ˆç”¨æ–¼æœå°‹ï¼‰\nconst keywordText = keywords.length > 0 ? `é—œéµå­—ï¼š${keywords.join(', ')}` : '';\nconst gameServerText = gameServer.length > 0 ? `éŠæˆ²ä¼ºæœå™¨ï¼š${gameServer.join(', ')}` : '';\nconst systemText = system.length > 0 ? `ç³»çµ±ï¼š${system.join(', ')}` : '';\n\n// çµ„åˆ pageContentï¼ˆçµ¦ embedding ä½¿ç”¨çš„å®Œæ•´æ–‡å­—ï¼‰\nlet pageContent = `æ¨™é¡Œï¼š${pageTitle}\\n`;\nif (keywordText) pageContent += keywordText + '\\n';\nif (gameServerText) pageContent += gameServerText + '\\n';\nif (systemText) pageContent += systemText + '\\n';\npageContent += `\\nå…§å®¹ï¼š\\n${content}`;\n\n// å–å¾—é é¢ID\nconst pageId = items[0]?.json.parent?.page_id || items[0]?.json.id;\n\n// å›å‚³ Qdrant Vector Store éœ€è¦çš„æ ¼å¼\nreturn [\n  {\n    json: {\n      // pageContent æ˜¯ç”¨æ–¼å‘é‡åŒ–çš„å®Œæ•´æ–‡å­—\n      pageContent: pageContent,\n      \n      // metadata åŒ…å«æ‰€æœ‰çµæ§‹åŒ–è³‡æ–™\n      metadata: {\n        id: pageId,\n        title: pageTitle,\n        pageId: pageId,\n        keywords: keywords,\n        gameServer: gameServer,\n        system: system,\n        content: content,\n        sections: sections, // ä¿ç•™åˆ†æ®µè³‡è¨Š\n        sectionCount: sections.length,\n        contentLength: content.length,\n        source: \"notion\",\n        contentType: \"knowledge_base\",\n        indexed_at: new Date().toISOString(),\n        // æœå°‹å‹å–„çš„æ¨™ç±¤\n        searchTags: [...keywords, ...gameServer, ...system].filter(tag => tag && tag.trim()),\n        // æ˜¯å¦åŒ…å«ç¨‹å¼ç¢¼\n        hasCode: content.includes('```'),\n        // æ˜¯å¦åŒ…å«è¡¨æ ¼\n        hasTable: content.includes('|'),\n        // æ˜¯å¦åŒ…å«åœ–ç‰‡\n        hasImage: content.includes('[åœ–ç‰‡')\n      }\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1664,
        1504
      ],
      "id": "71936387-6ba7-4633-bcc4-e31b5abdc6a5",
      "name": "æ•´ç†å–®ä¸€é é¢"
    },
    {
      "parameters": {
        "jsCode": "// items æ˜¯ n8n æ¨™æº–çš„è¼¸å…¥ï¼Œæ¯ä¸€ç­†å°±æ˜¯ä¸€å€‹è¦å‰‡é \n\nreturn items.map(item => {\n  // é é¢ id\n  const pageId = item.json.id;\n\n  // é é¢æ¨™é¡Œï¼ˆtitle æ¬„ä½æ˜¯å€‹é™£åˆ—ï¼‰\n  let title = '';\n  const titleArr = item.json.properties?.é …ç›®?.title || [];\n  if (titleArr.length > 0) {\n    title = titleArr.map(t => t.plain_text).join('');\n  }\n\n  // Notion é é¢ç¶²å€ï¼ˆä½ å·²ç¶“æœ‰ url æ¬„ä½ï¼‰\n  const url = item.json.url;\n\n  const system = (item.json.properties?.ç³»çµ±?.multi_select || []).map(s => s.name);\n  const lastEditedTime = item.json.last_edited_time;\n\n  return {\n    json: {\n      pageId,\n      title,\n      url,\n      system,\n      lastEditedTime\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        784,
        1488
      ],
      "id": "7bb81b51-dfb0-4ba0-8a6e-79faab62b2ad",
      "name": "æ•´ç†æ‰¹æ¬¡é é¢"
    },
    {
      "parameters": {
        "jsCode": "const embeddingResult = $input.first().json;\nconst processedData = $('æ•´ç†å–®ä¸€é é¢').first().json;\nconst vector = embeddingResult.embedding.values;\n\nconsole.log('=== Building Qdrant Point ===');\nconsole.log('Page ID:', processedData.metadata.id);\nconsole.log('Content:', processedData.pageContent.substring(0, 100));\n\nreturn [{\n    json: {\n        points: [\n            {\n                id: processedData.metadata.id,\n                vector: vector,\n                payload: {\n                    content: processedData.pageContent,\n                    metadata: {\n                        title: processedData.metadata.title,\n                        pageId: processedData.metadata.pageId,\n                        keywords: processedData.metadata.keywords,\n                        system: processedData.metadata.system,\n                        source: processedData.metadata.source,\n                        contentType: processedData.metadata.contentType,\n                        contentLength: processedData.metadata.contentLength,\n                        sectionCount: processedData.metadata.sectionCount,\n                        searchTags: processedData.metadata.searchTags,\n                        indexed_at: new Date().toISOString()\n                    }\n                }\n            }\n        ]\n    }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2144,
        1504
      ],
      "id": "6d711de2-62f7-4a10-baf8-709e67bf6cd0",
      "name": "è½‰æˆå„²å­˜æ ¼å¼"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:embedContent",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "key",
              "value": "AIzaSyAz-L2vN9CbP57YYNH4VHeFXfrUQgDlw1w"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content.parts[0].text",
              "value": "={{ $json.pageContent }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1920,
        1504
      ],
      "id": "f9d5ac67-3486-4b03-86cf-2243fb1e551b",
      "name": "HTTP Request å‘é‡è¨ˆç®—"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "https://junqdrant.zeabur.app/collections/resume/points",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api-key",
              "value": "rU6geVAj98WqOYi0ho3yPfu1Fa527Mx4"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2416,
        1504
      ],
      "id": "4a1c9a14-4fad-49c9-aeba-c3761f5d0ad4",
      "name": "HTTP Request å„²å­˜å‘é‡"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 19,
              "triggerAtMinute": 30
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        176,
        1584
      ],
      "id": "82123a91-f4ec-4203-811f-10dbf94d9157",
      "name": "Schedule"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1456,
        1104
      ],
      "id": "1d1204ff-9c71-43a1-b502-c4f4e218c00b",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "TcbdbxzebK9gSKPI",
          "name": "Google Gemini(PaLM) Api account 6"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        608,
        976
      ],
      "id": "10cd1c95-6401-460f-bd5c-ee2fc2785b3d",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "TcbdbxzebK9gSKPI",
          "name": "Google Gemini(PaLM) Api account 6"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const answer = $json[\"output\"];\nconst now = Math.floor(Date.now() / 1000);\n\nreturn [{\n  json: {\n    id: \"chatcmpl-\" + now,\n    object: \"chat.completion\",\n    created: now,\n    model: \"çŸ¥è­˜æ©Ÿå™¨äºº\",\n    stream: false,\n    choices: [\n      {\n        index: 0,\n        message: {\n          role: \"assistant\",\n          content: $input.first().json.output.answer\n        },\n        finish_reason: \"stop\"\n      }\n    ],\n    usage: {\n      prompt_tokens: 50,\n      completion_tokens: 100,\n      total_tokens: 150\n    }\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2272,
        784
      ],
      "id": "4ca5f077-8624-4afd-a656-f594fd84859d",
      "name": "å›æ‡‰æ ¼å¼"
    },
    {
      "parameters": {
        "content": "å®šæ™‚æ‹‰å–notionè½‰å‘é‡",
        "height": 384,
        "width": 2720
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        112,
        1376
      ],
      "id": "7e943351-3ab0-4b7f-9d67-5744e02d5208",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "æ©Ÿå™¨äººå•ç­”å…¥å£",
        "height": 256,
        "width": 656,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1008,
        336
      ],
      "id": "f855ecc1-fc39-4744-b680-9c060f5a5f68",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "æ©Ÿå™¨äººæŸ¥è©¢æ¨¡å‹",
        "height": 256,
        "width": 656
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1024,
        16
      ],
      "id": "ce71d33b-b30b-4e14-9acd-ed62772bfca9",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "æä¾›æ©Ÿå™¨äººé¡å¤–è³‡è¨Š",
        "height": 496,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -160,
        48
      ],
      "id": "a931e45a-f01e-40e4-9b6d-5db3064c7770",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "jsCode": "// å–å¾—ç•¶å‰çš„ chat è¼¸å…¥\nconst currentInput = $input.first().json;\nconst chatInput = currentInput.chatInput || '';\nconst sessionId = currentInput.sessionId || '';\n\n// å˜—è©¦å–å¾—å°è©±æ­·å² (å¦‚æœæœ‰æ¥ Memory ç¯€é»)\nlet chatHistory = [];\ntry {\n  chatHistory = $('Window Buffer Memory').all();\n} catch (e) {\n  // æ²’æœ‰ Memory ç¯€é»ä¹Ÿæ²’é—œä¿‚\n  console.log('æ²’æœ‰æ‰¾åˆ° Memory ç¯€é»,ä½¿ç”¨ç©ºæ­·å²');\n}\n\nlet systemPrompt = '';\nconst userAssistantPairs = [];\nlet lastUserMessage = chatInput;\nlet tempPair = [];\nconst allMessages = [];\n\n// è™•ç†æ­·å²è¨Šæ¯\nif (chatHistory && chatHistory.length > 0) {\n  for (const item of chatHistory) {\n    const message = item.json;\n    \n    // Memory ç¯€é»çš„æ ¼å¼å¯èƒ½æ˜¯ type: 'human'/'ai' æˆ– role: 'user'/'assistant'\n    const role = message.type === 'human' ? 'user' \n                : message.type === 'ai' ? 'assistant' \n                : message.role || 'user';\n    const content = message.text || message.content || message.message || '';\n    \n    if (!content) continue;\n    \n    allMessages.push({ role, content });\n    \n    if (role === 'system' && !systemPrompt) {\n      systemPrompt = content;\n      continue;\n    }\n    \n    if (role === 'user') {\n      if (tempPair.length > 0) {\n        userAssistantPairs.push(tempPair);\n      }\n      tempPair = [`ä½¿ç”¨è€…:${content}`];\n    } else if (role === 'assistant') {\n      tempPair.push(`AI:${content}`);\n      userAssistantPairs.push(tempPair);\n      tempPair = [];\n    }\n  }\n}\n\n// åŠ å…¥ç•¶å‰ä½¿ç”¨è€…è¨Šæ¯\nif (lastUserMessage) {\n  allMessages.push({ role: 'user', content: lastUserMessage });\n  \n  // å¦‚æœå‰é¢æœ‰æœªå®Œæˆçš„ pair,å…ˆå­˜èµ·ä¾†\n  if (tempPair.length > 0) {\n    userAssistantPairs.push(tempPair);\n  }\n  // åŠ å…¥ç•¶å‰ä½¿ç”¨è€…è¨Šæ¯\n  userAssistantPairs.push([`ä½¿ç”¨è€…:${lastUserMessage}`]);\n}\n\n// åªå–æœ€è¿‘ 5 çµ„\nconst last5Pairs = userAssistantPairs.slice(-5);\nconst dialogue = last5Pairs.flat().join('\\n');\n\n// è§£æè«‹æ±‚ç›®çš„\nlet ReqPurpose = 'query';\nif (lastUserMessage.trim().startsWith('###')) {\n  if (lastUserMessage.includes('Generate a concise, 3-5 word title')) {\n    ReqPurpose = 'title';\n  } else if (lastUserMessage.includes('Generate 1-3 broad tags')) {\n    ReqPurpose = 'tags';\n  } else if (\n    lastUserMessage.includes('Suggest 3-5 relevant follow-up questions') ||\n    lastUserMessage.includes('\"follow_ups\"')\n  ) {\n    ReqPurpose = 'follow_ups';\n  }\n}\n\n// è¼¸å‡ºçµæœ\nreturn {\n  json: {\n    sessionId,           // ä¿ç•™ sessionId çµ¦å¾ŒçºŒç¯€é»ä½¿ç”¨\n    systemPrompt,\n    dialogue,\n    lastUserMessage,\n    allMessages,\n    ReqPurpose,\n    chatInput            // ä¿ç•™åŸå§‹ chatInput\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        544,
        768
      ],
      "id": "0a78b8c0-89ea-4565-aa44-288e5ddb0f28",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "public": true,
        "initialMessages": "å—¨",
        "options": {
          "responseMode": "responseNodes"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        256,
        768
      ],
      "id": "012f2202-819c-488c-9cfa-fd5f9b749cf4",
      "name": "When chat message received",
      "webhookId": "34fc65d2-1849-44b5-92d5-93bfffdaa397"
    },
    {
      "parameters": {
        "content": "æ©Ÿå™¨äºº - å…ˆä¸ç”¨çœ‹",
        "height": 672,
        "width": 1536,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1072,
        -48
      ],
      "id": "684dac65-1096-46da-9e84-0490243aabef",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "$node[\"Webhook completions\"].json[\"headers\"][\"x-openwebui-chat-id\"]"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        800,
        976
      ],
      "id": "4f880417-0e34-4de8-88db-b862d1d21d6a",
      "name": "Simple Memory"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        176,
        1424
      ],
      "id": "3a735dcf-b681-4b93-a341-2c4b5e85ada0",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "message": "=æ‰¾ä¸åˆ°è³‡æ–™",
        "waitUserReply": false,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chat",
      "typeVersion": 1,
      "position": [
        2560,
        560
      ],
      "id": "516b2bf1-2ffe-4566-8bf1-017fe439e010",
      "name": "æ‰¾ä¸åˆ°çš„å›æ‡‰"
    },
    {
      "parameters": {
        "message": "={{ $json.choices[0].message.content }}",
        "waitUserReply": false,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chat",
      "typeVersion": 1,
      "position": [
        2560,
        784
      ],
      "id": "f03e6273-73d5-4e51-9a82-c91bf2a3e184",
      "name": "Respond to Chat"
    }
  ],
  "connections": {
    "Webhook completions": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis Chat Memory": {
      "ai_memory": [
        []
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "æ‰¾ä¸åˆ°çš„å›æ‡‰",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "å›æ‡‰æ ¼å¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Res Title",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Res Tags",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Res Follow_ups",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook model": {
      "main": [
        [
          {
            "node": "create data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create data": {
      "main": [
        [
          {
            "node": "Response Webhook model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Notion Page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replace Me": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notion DB": {
      "main": [
        [
          {
            "node": "æ•´ç†æ‰¹æ¬¡é é¢",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notion Page": {
      "main": [
        [
          {
            "node": "æ•´ç†å–®ä¸€é é¢",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "SearchQADatabase": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini1": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "æ•´ç†å–®ä¸€é é¢": {
      "main": [
        [
          {
            "node": "HTTP Request å‘é‡è¨ˆç®—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ•´ç†æ‰¹æ¬¡é é¢": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰æˆå„²å­˜æ ¼å¼": {
      "main": [
        [
          {
            "node": "HTTP Request å„²å­˜å‘é‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request å‘é‡è¨ˆç®—": {
      "main": [
        [
          {
            "node": "è½‰æˆå„²å­˜æ ¼å¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request å„²å­˜å‘é‡": {
      "main": [
        [
          {
            "node": "Replace Me",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule": {
      "main": [
        [
          {
            "node": "Notion DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "å›æ‡‰æ ¼å¼": {
      "main": [
        [
          {
            "node": "Respond to Chat",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Notion DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "9c33d270-bec1-4eaf-8250-6c0dea8afdeb",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-11-06T05:49:20.472Z",
      "updatedAt": "2025-11-06T05:49:20.472Z",
      "role": "workflow:owner",
      "workflowId": "QqBn46QhoeZ9flPg",
      "projectId": "iZydbwsMPJYYjvth",
      "project": {
        "createdAt": "2025-09-16T02:39:54.633Z",
        "updatedAt": "2025-09-16T02:43:19.908Z",
        "id": "iZydbwsMPJYYjvth",
        "name": "common web <web@wanin.tw>",
        "type": "personal",
        "icon": null,
        "description": null,
        "projectRelations": [
          {
            "createdAt": "2025-09-16T02:39:54.639Z",
            "updatedAt": "2025-09-16T02:39:54.639Z",
            "userId": "55f25be3-69cb-4a61-849e-09b3e6328043",
            "projectId": "iZydbwsMPJYYjvth",
            "user": {
              "createdAt": "2025-09-16T02:39:54.628Z",
              "updatedAt": "2025-11-10T02:20:23.000Z",
              "id": "55f25be3-69cb-4a61-849e-09b3e6328043",
              "email": "web@wanin.tw",
              "firstName": "common",
              "lastName": "web",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-09-16T02:43:24.324Z",
                "personalization_survey_n8n_version": "1.108.1"
              },
              "settings": {
                "easyAIWorkflowOnboarded": true,
                "firstSuccessfulWorkflowId": "XN79dmNc8yPVm6XU",
                "userActivated": true,
                "userActivatedAt": 1758096117396,
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1761544952978
                }
              },
              "disabled": false,
              "mfaEnabled": false,
              "lastActiveAt": "2025-11-09",
              "isPending": false
            }
          }
        ]
      }
    }
  ],
  "tags": []
}